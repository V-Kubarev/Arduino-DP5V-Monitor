# Математическая модель дозиметра DP-5V

## 1. Назначение модели

Документ описывает математическую модель обработки импульсов
гейгеровского счётчика DP-5V, реализованную в прошивке Arduino.
Модель используется для оценки скорости счёта, мощности дозы,
накопленной дозы и статистической погрешности измерений.

---

## 2. Физическая основа измерений

Поток импульсов гейгеровского счётчика рассматривается как
пуассоновский процесс, в котором каждый импульс соответствует
одному акту регистрации ионизирующего излучения.

---

## 3. Обозначения

| Обозначение | Описание |
|------------|----------|
| \(N(t)\) | Общее число зарегистрированных импульсов к моменту времени \(t\) |
| \(n_k\) | Число импульсов за \(k\)-ю секунду |
| \(T_w\) | Длительность скользящего окна, с |
| CPS | Средняя скорость счёта (counts per second) |
| \(\dot{D}\) | Мощность дозы, µSv/h |
| \(D\) | Накопленная доза, µSv |
| \(\tau_d\) | Мёртвое время счётчика |
| \(k_\mu\) | Коэффициент пересчёта CPS → µSv/h |
| \(k_{B8}\) | Коэффициент пересчёта CPS → Б-8 |

---

## 4. Мёртвое время счётчика

Вводится программное мёртвое время:

$$
\tau_d = 20\ \text{мс}
$$

Импульс учитывается только при выполнении условия:

$$
t_i - t_{i-1} > \tau_d
$$

Данная модель соответствует **непарализуемому счётчику**.

---

## 5. Подсчёт импульсов по секундам

Количество импульсов, зарегистрированных за секунду \(k\):

$$
n_k = N(k) - N(k-1)
$$

---

## 6. Оценка скорости счёта (CPS)

Для уменьшения статистического шума используется скользящее окно
длительностью:

$$
T_w = 30\ \text{с}
$$

Средняя скорость счёта:

$$
\text{CPS}_k =
\frac{1}{T_w}
\sum_{i=k-T_w+1}^{k} n_i
$$

---

## 7. Расчёт мощности дозы

Пересчёт CPS в мощность дозы выполняется с использованием
калибровочного коэффициента:

$$
k_\mu = 0.34\ \frac{\text{µSv}}{\text{h·CPS}}
$$

Мощность дозы:

$$
\dot{D}_k = k_\mu \cdot \text{CPS}_k
$$

---

## 8. Накопление дозы

Накопленная доза вычисляется дискретным интегрированием мощности дозы
во времени:

$$
D_{k+1} = D_k + \frac{\dot{D}_k}{3600}
$$

Данная формула является дискретным аналогом интеграла:

$$
D(t) = \int_0^t \dot{D}(\tau)\, d\tau
$$

---

## 9. Эквивалент Б-8

Для отображения показаний в условных единицах Б-8 используется линейный
пересчёт:

$$
B8_k = \text{CPS}_k \cdot k_{B8}
$$

где:

$$
k_{B8} = 60
$$

---

## 10. Статистическая погрешность измерений

Для пуассоновского процесса стандартное отклонение равно:

$$
\sigma_N = \sqrt{N}
$$

Относительная статистическая погрешность (%), вычисляемая по числу
импульсов в окне усреднения:

$$
\varepsilon_k =
\frac{100}{\sqrt{
\sum_{i=k-T_w+1}^{k} n_i
}}
$$

---

## 11. Итоговая математическая модель

$$
\begin{aligned}
n_k &= N(k) - N(k-1) \\
\text{CPS}_k &= \frac{1}{T_w}\sum n_k \\
\dot{D}_k &= k_\mu\,\text{CPS}_k \\
D_{k+1} &= D_k + \frac{\dot{D}_k}{3600} \\
\varepsilon_k &= \frac{100}{\sqrt{\sum n_k}}
\end{aligned}
$$

---

## 12. Связь с реализацией прошивки

| Математическая величина | Переменная в коде |
|------------------------|-------------------|
| \(n_k\) | `pulsesThisSecond` |
| Скользящее окно | `cpsBuffer[30]` |
| CPS | `cps` |
| \(\dot{D}\) | `doseRate_uSv` |
| \(D\) | `accumulatedDose_uSv` |
| \(\varepsilon\) | `errorPercent` |
