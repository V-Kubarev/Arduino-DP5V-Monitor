# Математическая модель дозиметра DP-5V

## 1. Назначение модели
Модель описывает обработку импульсов гейгеровского счётчика DP-5V,
оценку мощности дозы, накопленной дозы и статистической погрешности
на основе прошивки Arduino.

---

## 2. Физическая основа
Регистрация ионизирующего излучения рассматривается как
пуассоновский поток импульсов.

Каждый импульс соответствует одному акту регистрации частиц
гейгеровским счётчиком.

---

## 3. Обозначения

| Обозначение | Описание |
|------------|----------|
| \(N(t)\) | Общее число импульсов к моменту времени \(t\) |
| \(n_k\) | Число импульсов за \(k\)-ю секунду |
| \(T_w\) | Длительность скользящего окна (30 с) |
| CPS | Средняя скорость счёта (counts per second) |
| \(\dot{D}\) | Мощность дозы, мкЗв/ч |
| \(D\) | Накопленная доза, мкЗв |
| \(\tau_d\) | Мёртвое время счётчика |
| \(k_\mu\) | Коэффициент CPS → мкЗв/ч |
| \(k_{B8}\) | Коэффициент CPS → Б-8 |

---

## 4. Мёртвое время счётчика

Вводится программное мёртвое время:

\[
\tau_d = 20\ \text{мс}
\]

Импульс учитывается только если:

\[
t_i - t_{i-1} > \tau_d
\]

Модель соответствует **непарализуемому счётчику**.

---

## 5. Подсчёт импульсов

Количество импульсов за секунду:

\[
n_k = N(k) - N(k-1)
\]

---

## 6. Скользящее усреднение (CPS)

Используется окно длительностью:

\[
T_w = 30\ \text{с}
\]

Средний CPS:

\[
\text{CPS}_k =
\frac{1}{T_w}
\sum_{i=k-T_w+1}^{k} n_i
\]

---

## 7. Мощность дозы

Калибровочный коэффициент:

\[
k_\mu = 0.34\ \frac{\mu\text{Sv}}{\text{h·CPS}}
\]

Мощность дозы:

\[
\dot{D}_k = k_\mu \cdot \text{CPS}_k
\]

---

## 8. Накопление дозы

Накопленная доза вычисляется дискретным интегрированием:

\[
D_{k+1} = D_k + \frac{\dot{D}_k}{3600}
\]

---

## 9. Эквивалент Б-8

\[
B8_k = \text{CPS}_k \cdot k_{B8}
\]

где:

\[
k_{B8} = 60
\]

---

## 10. Статистическая погрешность

Для пуассоновского процесса:

\[
\sigma_N = \sqrt{N}
\]

Относительная погрешность (%):

\[
\varepsilon_k =
\frac{100}{\sqrt{
\sum_{i=k-T_w+1}^{k} n_i
}}
\]

---

## 11. Итоговая модель

\[
\begin{aligned}
n_k &= N(k) - N(k-1) \\
\text{CPS}_k &= \frac{1}{T_w}\sum n_k \\
\dot{D}_k &= k_\mu\,\text{CPS}_k \\
D_{k+1} &= D_k + \frac{\dot{D}_k}{3600} \\
\varepsilon_k &= \frac{100}{\sqrt{\sum n_k}}
\end{aligned}
\]

---

## 12. Связь с реализацией

| Модель | Код |
|------|-----|
| \(n_k\) | `pulsesThisSecond` |
| Скользящее окно | `cpsBuffer[30]` |
| CPS | `cps` |
| \(\dot{D}\) | `doseRate_uSv` |
| \(D\) | `accumulatedDose_uSv` |
| \(\varepsilon\) | `errorPercent` |
